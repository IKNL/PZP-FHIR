map "http://hl7.org/fhir/StructureMap/Appointment4to3" = "R4 to R3 Conversion for Appointment"

uses "http://hl7.org/fhir/StructureDefinition/Appointment" alias Appointment as source
uses "http://hl7.org/fhir/3.0/StructureDefinition/Appointment" alias AppointmentR3 as target

imports "http://hl7.org/fhir/StructureMap/*4to3"

group Appointment(source src : Appointment, target tgt : AppointmentR3) extends DomainResource <<type+>> {
  src.identifier as vs -> tgt.identifier as vt then Identifier(vs, vt);
  src.status as vs -> tgt.status as vt then code(vs, vt);
  src.serviceCategory as vs -> tgt.serviceCategory as vt then string(vs, vt);
  src.serviceType as vs -> tgt.serviceType as vt then string(vs, vt);
  src.specialty as vs -> tgt.specialty as vt then string(vs, vt);
  src.appointmentType as vs -> tgt.appointmentType as vt then string(vs, vt);
  src.reasonCode -> tgt.reason;
  src.reasonReference -> tgt.indication;
  src.priority as vs -> tgt.priority as vt then string(vs, vt);
  src.description as vs -> tgt.description as vt then markdown(vs, vt);
  src.supportingInformation as vs -> tgt.supportingInformation as vt then string(vs, vt);
  src.start as vs -> tgt.start as vt then dateTime(vs, vt);
  src.end as vs -> tgt.end as vt then dateTime(vs, vt);
  src.minutesDuration as vs -> tgt.minutesDuration as vt then string(vs, vt);
  src.slot as vs -> tgt.slot as vt then string(vs, vt);
  src.created as vs -> tgt.created as vt then dateTime(vs, vt);
  src.comment as vs -> tgt.comment as vt then string(vs, vt);
  src.basedOn -> tgt.incomingReferral "incomingReferral";
  src.participant as vs0 -> tgt.participant as vt0 then {
    vs0.type -> vt0.type;
    vs0.actor -> vt0.actor;
    vs0.required -> vt0.required;
    vs0.status -> vt0.status;
  };
  src.requestedPeriod as vs -> tgt.requestedPeriod as vt then string(vs, vt);
}

