map "http://hl7.org/fhir/StructureMap/SubstanceAmount4to3" = "R4 to R3 Conversion for SubstanceAmount"

uses "http://hl7.org/fhir/StructureDefinition/SubstanceAmount" alias SubstanceAmount as source
uses "http://hl7.org/fhir/3.0/StructureDefinition/SubstanceAmount" alias SubstanceAmountR3 as target

imports "http://hl7.org/fhir/StructureMap/*4to3"

group SubstanceAmount(source src : SubstanceAmountR3, target tgt : SubstanceAmount) extends BackboneElement <<type+>> {
  src.amount as vs -> tgt.amount as vt then string(vs, vt);
  src.amountType as vs -> tgt.amountType as vt then string(vs, vt);
  src.amountText as vs -> tgt.amountText as vt then string(vs, vt);
  src.referenceRange as s -> tgt.referenceRange as t then SubstanceAmountReferenceRange(s, t);
}

group SubstanceAmountReferenceRange(source src, target tgt) extends Element {
  src.lowLimit as vs -> tgt.lowLimit as vt then string(vs, vt);
  src.highLimit as vs -> tgt.highLimit as vt then string(vs, vt);
}

